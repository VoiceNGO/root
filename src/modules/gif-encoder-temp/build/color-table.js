"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});


const TRANSPARENT = [0, 0, 1];

let ColorTable = class ColorTable {

  constructor(useTransparency) {
    this._colors = [];

    this.useTransparency = useTransparency;

    if (useTransparency) {
      this._colors.push(TRANSPARENT.slice());
    }
  }

  addColor(color) {
    this._colors.push(color);

    return this;
  }

  serialize() {
    const { size } = this;
    const numColors = this._colors.length;
    const zerosToAppend = (size - numColors) * 3;

    return [].concat(...this._colors, Array(zerosToAppend).fill(0));
  }

  get colors() {
    const { size } = this;
    const colors = this._colors.slice();
    for (let i = colors.length; i < size; i++) {
      colors.push([0, 0, 0]);
    }
    return colors;
  }

  get size() {
    const numColors = this._colors.length;
    const check = 128;
    while (check > 4) {
      if (numColors > check) return 2 * check;
    }

    return check;
  }
};
exports.default = ColorTable;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9jb2xvci10YWJsZS5qcyJdLCJuYW1lcyI6WyJUUkFOU1BBUkVOVCIsIkNvbG9yVGFibGUiLCJjb25zdHJ1Y3RvciIsInVzZVRyYW5zcGFyZW5jeSIsIl9jb2xvcnMiLCJwdXNoIiwic2xpY2UiLCJhZGRDb2xvciIsImNvbG9yIiwic2VyaWFsaXplIiwic2l6ZSIsIm51bUNvbG9ycyIsImxlbmd0aCIsInplcm9zVG9BcHBlbmQiLCJjb25jYXQiLCJBcnJheSIsImZpbGwiLCJjb2xvcnMiLCJpIiwiY2hlY2siXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFJQSxNQUFNQSxjQUFzQixDQUFDLENBQUQsRUFBSSxDQUFKLEVBQU8sQ0FBUCxDQUE1Qjs7SUFFcUJDLFUsR0FBTixNQUFNQSxVQUFOLENBQWlCOztBQUk5QkMsY0FBWUMsZUFBWixFQUFzQztBQUFBLFNBSHRDQyxPQUdzQyxHQUhiLEVBR2E7O0FBQ3BDLFNBQUtELGVBQUwsR0FBdUJBLGVBQXZCOztBQUVBLFFBQUlBLGVBQUosRUFBcUI7QUFDbkIsV0FBS0MsT0FBTCxDQUFhQyxJQUFiLENBQWtCTCxZQUFZTSxLQUFaLEVBQWxCO0FBQ0Q7QUFDRjs7QUFFREMsV0FBU0MsS0FBVCxFQUE4QjtBQUM1QixTQUFLSixPQUFMLENBQWFDLElBQWIsQ0FBa0JHLEtBQWxCOztBQUVBLFdBQU8sSUFBUDtBQUNEOztBQUVEQyxjQUEyQjtBQUN6QixVQUFNLEVBQUVDLElBQUYsS0FBVyxJQUFqQjtBQUNBLFVBQU1DLFlBQVksS0FBS1AsT0FBTCxDQUFhUSxNQUEvQjtBQUNBLFVBQU1DLGdCQUFnQixDQUFDSCxPQUFPQyxTQUFSLElBQXFCLENBQTNDOztBQUVBLFdBQU8sR0FBR0csTUFBSCxDQUFVLEdBQUcsS0FBS1YsT0FBbEIsRUFBMkJXLE1BQU1GLGFBQU4sRUFBcUJHLElBQXJCLENBQTBCLENBQTFCLENBQTNCLENBQVA7QUFDRDs7QUFFRCxNQUFJQyxNQUFKLEdBQTRCO0FBQzFCLFVBQU0sRUFBRVAsSUFBRixLQUFXLElBQWpCO0FBQ0EsVUFBTU8sU0FBUyxLQUFLYixPQUFMLENBQWFFLEtBQWIsRUFBZjtBQUNBLFNBQUssSUFBSVksSUFBSUQsT0FBT0wsTUFBcEIsRUFBNEJNLElBQUlSLElBQWhDLEVBQXNDUSxHQUF0QyxFQUEyQztBQUN6Q0QsYUFBT1osSUFBUCxDQUFZLENBQUMsQ0FBRCxFQUFJLENBQUosRUFBTyxDQUFQLENBQVo7QUFDRDtBQUNELFdBQU9ZLE1BQVA7QUFDRDs7QUFFRCxNQUFJUCxJQUFKLEdBQW1CO0FBQ2pCLFVBQU1DLFlBQVksS0FBS1AsT0FBTCxDQUFhUSxNQUEvQjtBQUNBLFVBQU1PLFFBQVEsR0FBZDtBQUNBLFdBQU9BLFFBQVEsQ0FBZixFQUFrQjtBQUNoQixVQUFJUixZQUFZUSxLQUFoQixFQUF1QixPQUFPLElBQUlBLEtBQVg7QUFDeEI7O0FBRUQsV0FBT0EsS0FBUDtBQUNEO0FBM0M2QixDO2tCQUFYbEIsVSIsImZpbGUiOiJjb2xvci10YWJsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIEBmbG93XG5cbmV4cG9ydCB0eXBlIHRDb2xvciA9IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcblxuY29uc3QgVFJBTlNQQVJFTlQ6IHRDb2xvciA9IFswLCAwLCAxXTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29sb3JUYWJsZSB7XG4gIF9jb2xvcnM6IEFycmF5PHRDb2xvcj4gPSBbXTtcbiAgdXNlVHJhbnNwYXJlbmN5OiBib29sZWFuO1xuXG4gIGNvbnN0cnVjdG9yKHVzZVRyYW5zcGFyZW5jeTogYm9vbGVhbikge1xuICAgIHRoaXMudXNlVHJhbnNwYXJlbmN5ID0gdXNlVHJhbnNwYXJlbmN5O1xuXG4gICAgaWYgKHVzZVRyYW5zcGFyZW5jeSkge1xuICAgICAgdGhpcy5fY29sb3JzLnB1c2goVFJBTlNQQVJFTlQuc2xpY2UoKSk7XG4gICAgfVxuICB9XG5cbiAgYWRkQ29sb3IoY29sb3I6IHRDb2xvcik6IHRoaXMge1xuICAgIHRoaXMuX2NvbG9ycy5wdXNoKGNvbG9yKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgc2VyaWFsaXplKCk6IEFycmF5PG51bWJlcj4ge1xuICAgIGNvbnN0IHsgc2l6ZSB9ID0gdGhpcztcbiAgICBjb25zdCBudW1Db2xvcnMgPSB0aGlzLl9jb2xvcnMubGVuZ3RoO1xuICAgIGNvbnN0IHplcm9zVG9BcHBlbmQgPSAoc2l6ZSAtIG51bUNvbG9ycykgKiAzO1xuXG4gICAgcmV0dXJuIFtdLmNvbmNhdCguLi50aGlzLl9jb2xvcnMsIEFycmF5KHplcm9zVG9BcHBlbmQpLmZpbGwoMCkpO1xuICB9XG5cbiAgZ2V0IGNvbG9ycygpOiBBcnJheTx0Q29sb3I+IHtcbiAgICBjb25zdCB7IHNpemUgfSA9IHRoaXM7XG4gICAgY29uc3QgY29sb3JzID0gdGhpcy5fY29sb3JzLnNsaWNlKCk7XG4gICAgZm9yIChsZXQgaSA9IGNvbG9ycy5sZW5ndGg7IGkgPCBzaXplOyBpKyspIHtcbiAgICAgIGNvbG9ycy5wdXNoKFswLCAwLCAwXSk7XG4gICAgfVxuICAgIHJldHVybiBjb2xvcnM7XG4gIH1cblxuICBnZXQgc2l6ZSgpOiBudW1iZXIge1xuICAgIGNvbnN0IG51bUNvbG9ycyA9IHRoaXMuX2NvbG9ycy5sZW5ndGg7XG4gICAgY29uc3QgY2hlY2sgPSAxMjg7XG4gICAgd2hpbGUgKGNoZWNrID4gNCkge1xuICAgICAgaWYgKG51bUNvbG9ycyA+IGNoZWNrKSByZXR1cm4gMiAqIGNoZWNrO1xuICAgIH1cblxuICAgIHJldHVybiBjaGVjaztcbiAgfVxufVxuIl19